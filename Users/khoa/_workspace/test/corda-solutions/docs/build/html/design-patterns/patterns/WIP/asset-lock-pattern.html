<!-- If you edit this, then please make the same changes to layout_for_doc_website.html, as that is used for the web
     doc site generation which we put analytics tracking on to identify any potential problem pages  -->


<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asset Lock Pattern &mdash; Corda Solutions Site October 2018 documentation</title><link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

            <a href="../../../index.html" class="icon icon-home"> Corda Solutions Site
          </a>
              <div class="version">
                October 2018
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Business Networks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../business-networks/intro.html">Corda Business Networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/what-is-a-business-network.html">What is a Business Network?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/how-do-business-networks-start.html">How Do Business Networks Start?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/how-do-business-networks-start.html#top-down-business-led">Top-Down (Business-Led)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/how-do-business-networks-start.html#bottom-up-technology-led">Bottom-Up (Technology-Led)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/how-do-business-networks-start.html#adoptive">Adoptive</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/roles-and-responsibilities.html">Roles and Responsibilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/roles-and-responsibilities.html#business-network-governor-bng">Business Network Governor (BNG)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/roles-and-responsibilities.html#business-network-operator-bno">Business Network Operator (BNO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/roles-and-responsibilities.html#business-network-user-bnu">Business Network User (BNU)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html">Business Network Operator Node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#business-network-operator-services">Business Network Operator Services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#membership-management">Membership Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#master-data-management">Master Data Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#authorisation">Authorisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#monitoring-reporting">Monitoring &amp; Reporting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#announcements-signaling">Announcements &amp; Signaling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-operator-node.html#software-distribution">Software Distribution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/interoperability.html">Interoperability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../business-networks/business-network-playbook/intro.html">Business Network Playbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/business-network-playbook/structure.html">S. Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/structure.html#s-1-define-business-network-mission">S.1. Define Business Network Mission</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/structure.html#s-2-assign-business-network-roles">S.2. Assign Business Network Roles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/structure.html#s-3-define-the-governance-body-model">S.3. Define the Governance Body Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html">G. Governance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-1-describe-participants">G.1. Describe Participants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-2-define-the-asset-model">G.2. Define the Asset Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-2-define-the-business-process">G.2. Define the Business Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-4-outline-legal-and-regulatory-needs">G.4. Outline Legal and Regulatory Needs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-5-establish-the-network-financial-model">G.5. Establish the Network Financial Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-6-establish-data-privacy-policies">G.6. Establish Data Privacy Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-7-establish-data-retention-policies">G.7. Establish Data Retention policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-8-establish-data-resiliency-and-system-availability-policies">G.8. Establish Data Resiliency and System Availability Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-9-assert-data-and-or-processing-standards">G.9. Assert Data and/or Processing Standards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-10-establish-transaction-validation-policies">G.10. Establish Transaction Validation Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-11-establish-dispute-management-policies">G.11. Establish Dispute Management Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-12-establish-on-boarding-policies">G.12. Establish On-boarding Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-13-establish-off-boarding-policies">G.13. Establish Off-boarding Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-14-establish-inter-network-policies">G.14. Establish Inter-Network Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-15-define-performance-slas">G.15. Define Performance SLAs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-16-establish-change-management-policies">G.16. Establish Change Management Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-16-1-business-network-role-changes">G.16.1. Business Network Role Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-16-2-business-network-legal-agreement-changes">G.16.2. Business Network Legal Agreement Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-16-3-corda-platform-change-management-rules">G.16.3. Corda Platform Change Management Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/governance.html#g-16-4-cordapp-change-management-rules">G.16.4. CorDapp Change Management Rules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html">O. Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-1-devise-node-configuration">O.1. Devise Node Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-2-notary-configuration">O.2. Notary Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-3-oracle-configuration">O.3. Oracle Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-4-create-change-management-procedures">O.4. Create change management procedures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-5-establish-operational-times">O.5. Establish Operational Times</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-6-establish-monitoring-metrics">O.6. Establish monitoring metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-7-define-audit-report-and-documentation-requirements">O.7. Define audit, report and documentation requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-8-define-the-network-support-parameters">O.8. Define the network support parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../business-networks/business-network-playbook/operations.html#o-9-define-data-retention-and-pruning-procedures">O.9. Define Data Retention and Pruning Procedures</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Software Designs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../designs/business-networks-membership-service.html">Business Network Membership Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#timeline">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#assumptions">Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#target-solution">Target solution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#on-boarding">On-boarding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#activation">Activation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#revocation">Revocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#metadata-updates">Metadata updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#membership-list-snapshot">Membership list snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#membership-list-distribution">Membership list distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#membership-verification">Membership verification</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/business-networks-membership-service.html#api-extension-points">API extension points</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html">Ledger Synchronisation Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#glossary">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#timeline">Timeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#assumptions">Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#target-solution">Target solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../designs/ledger-synchronisation-service.html#api-extension-points">API extension points</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CorDapp Design Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-overview.html">Overview of CDL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-whycdl.html">Why CorDapp Design Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-aims.html">Aims of CorDap Design Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-views.html">CorDapp Design Language Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-privacy.html">Analysing Privacy in CDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/overview/overview-complexity.html">Managing Complexity with CDL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../corda-modelling-notation/views/views-overview.html">CDL Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-common-concepts.html">Common Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-common-concepts.html#defining-terms">Defining Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-common-concepts.html#representing-states">Representing States</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html">State Machine (Ledger)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#analogy-to-a-finite-state-machine">Analogy to a Finite State Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#basic-model">Basic model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#introducing-constraints">Introducing Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#transitions-constraints">Transitions Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#state-level-constraints">State Level Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#transaction-level-constraints">Transaction Level Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#required-signers-constraints">Required Signers Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#visibility-constraints">Visibility Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#multiplicity-constraints">Multiplicity Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#mapping-to-the-code">Mapping to the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-machine.html#putting-it-together">Putting it together</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-evolution.html">State Evolution (Ledger)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-evolution.html#basic-state-evolution-diagram">Basic State Evolution Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-evolution.html#reference-state">Reference State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-evolution.html#explicit-transactions">Explicit Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-evolution.html#branching-transitions">Branching Transitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-state-instance.html">States Instance (Ledger)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-bpmn.html">BPMN (Orchestration)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-transaction-instance.html">Transaction Instance (Orchestration)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/views/views-flow-sequence.html">Flow Sequence (Orchestration)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../corda-modelling-notation/high-level-architecture/arch-overview.html">High Level Architecture Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/high-level-architecture/arch-high_level_process.html">High Level Process Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/high-level-architecture/arch-corda-network.html">High Level Corda Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../corda-modelling-notation/privacy/privacy-overview.html">Analysing Privacy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/privacy/privacy-why-model.html">Why Model Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/privacy/privacy-analysing.html">Analysing Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/privacy/privacy-expressing-requirements.html">Expressing Privacy Requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../corda-modelling-notation/complexity/complexity-overview.html">Managing Complexity</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/complexity/complexity-flow-coupling.html">Flow Level Coupling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/complexity/complexity-commands-coupling.html">Coupling Via Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/complexity/complexity-stateref-coupling.html">Coupling to a State Instance via StateRefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../corda-modelling-notation/complexity/complexity-linearid-coupling.html">Coupling to a State’s Evolution via Linear Id</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Design Patterns</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../patterns-overview.html">CorDapp Design Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../receipts.html">Receipts Pattern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#problem">Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#salient-factors">Salient Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#solution-walkthrough">Solution Walkthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#privacy-analysis">Privacy Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#things-to-consider-when-using-the-receipts-pattern">Things to Consider when using the Receipts pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../receipts.html#related-anti-patterns">Related Anti-patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../token-receipts.html">Token Receipts Pattern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#problem">Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#salient-factors">Salient Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#solution-walkthrough">Solution Walkthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#privacy-analysis">Privacy Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../token-receipts.html#extensions-to-investigate">Extensions - to investigate</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../antipatterns/antipatterns-overview.html">CorDapp Anti-Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../antipatterns/dual-roles-for-nodes.html">Dual roles for nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../antipatterns/check-ownership-of-all-input-states.html">Check ownership of all input states</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../antipatterns/unknown-commands.html">Unknown Commands</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Deployment Patterns</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../deployment/intro.html">Deployment options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../deployment/onprem/intro.html">On-Premises Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/bank-deploy-overview.html">Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/bank-deploy-overview.html#stakeholders">Stakeholders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/corda-node-architecture-components.html">Architecture Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/prerequisites-sizing.html">Prerequisites and Sizing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/prerequisites-sizing.html#corda-node-bridge-and-float">Corda Node, Bridge and Float</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/prerequisites-sizing.html#vault-database">Vault - Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html">Installation and Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#non-ha-corda-node-bridge-float">Non HA Corda Node, Bridge, Float</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#ha-corda-node-bridge-float">HA Corda Node, Bridge, Float</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#java-8-installation-on-vm">Java 8 Installation on VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#node-installation">Node Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#corda-firewall-pki-implementation">Corda Firewall PKI Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#explanation-of-pki-keys">Explanation of PKI Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#generate-bridge-and-float-keystores">Generate Bridge and Float Keystores</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#bridge-installation">Bridge Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#float-installation">Float Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#corda-3-x-vs-corda-4-x-firewall-upgrade">Corda 3.x vs Corda 4.x Firewall Upgrade</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#port-policy-and-network-configuration">Port Policy and Network Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-firewall-deployment.html#proxy-configurations">Proxy Configurations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/node-registration.html">Node Registration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-registration.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/node-registration.html#registration-actions">Registration Actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/start-components.html">Start Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/start-components.html#starting-float">Starting Float</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/start-components.html#starting-corda-node">Starting Corda Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/start-components.html#starting-bridge">Starting Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/monitoring.html">Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/corda-network-access-details.html">Important Corda Network Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/additional-info.html">Additional information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/concepts-background-information.html">Why Deploy Corda Firewall?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/flagdays.html">Corda Network Considerations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/kill-flow.html">Corda Flow Kill</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/kill-flow.html#how-to-kill-a-stuck-flow">How to Kill a stuck flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/kill-flow.html#how-to-create-stuck-flow">How to create stuck flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html">Corda Health Checker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#list-of-checks">List of Checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#report-format">Report Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#disabling-the-corda-health-survey-in-production">Disabling the Corda Health Survey in Production</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#running-the-corda-health-survey">Running the Corda Health Survey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/onprem/corda-health-checker.html#example-failure-scenario">Example Failure Scenario</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../deployment/kubernetes/intro.html">Corda Kubernetes Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/kubernetes/considerations.html">Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html">Architecture overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#architecture-explanation">Architecture explanation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#demilitarized-zone-dmz">Demilitarized Zone (DMZ)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#corda-firewall-bridge-float">Corda Firewall (Bridge &amp; Float)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#socks-and-http-proxies">SOCKS and HTTP Proxies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#kubernetes-cluster">Kubernetes Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#connections-communication-protocols">Connections &amp; Communication Protocols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#connection-sequence">Connection Sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/architecture-overview.html#internal-kubernetes-cluster-details">Internal Kubernetes Cluster Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/kubernetes/prerequisites.html">Corda Kubernetes Deployment Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/prerequisites.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/prerequisites.html#docker-image-generation">Docker image generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/prerequisites.html#public-key-infrastructure-pki-generation">Public Key Infrastructure (PKI) generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../deployment/kubernetes/corda-kubernetes-deployment.html">Corda Kubernetes Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/corda-kubernetes-deployment.html#registration-certificate-generation">Registration / Certificate Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/corda-kubernetes-deployment.html#cordapps">CorDapps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/corda-kubernetes-deployment.html#deployment">Deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../deployment/kubernetes/corda-kubernetes-deployment.html#execution-and-testing">Execution and testing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently asked questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../faq.html#what-is-this-site-for">What is this site for?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../faq.html#where-did-all-the-content-come-from">Where did all the content come from?</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Corda Solutions Site</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Asset Lock Pattern</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/design-patterns/patterns/WIP/asset-lock-pattern.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="asset-lock-pattern">
<h1>Asset Lock Pattern</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status:</th><td class="field-body">Ready for review</td>
</tr>
<tr class="field-even field"><th class="field-name">Implemented:</th><td class="field-body">No, still under design review</td>
</tr>
</tbody>
</table>
<div class="section" id="summary">
<h2>Summary</h2>
<p>An asset lock is a mechanism, used during a two-party agreement, that prevents one party spending or distributing the asset involved in the agreement elsewhere.
The lock enables a named asset to be locked out of use until another event has happened which only then allows the asset to be unlocked.</p>
</div>
<div class="section" id="context">
<h2>Context</h2>
<p>When we want to transfer an asset state from one party to another, we often need to ‘freeze’ the asset while the transaction occurs, as if to put it in a kind of escrow until another event or transaction has occurred.
One of the most common examples of this kind of event would be a payment for the asset such that the asset is locked until the new owner has made payment. Once payment or proof-of-payment has occured the lock can be lifted, allowing the buyer to accept ownership of the asset. This pattern is not restricted to payments and could be used for essentially any state change at all.</p>
</div>
<div class="section" id="problem">
<h2>Problem</h2>
<p>The need for such a lock stems from the potential for nefarious actors attempting to:</p>
<ul class="simple">
<li>Transact the same asset with a different party while a deal is underway.</li>
<li>Spend states away mid-pattern to benefit one party.</li>
<li>Offer a state but substitute a fake state (i.e. one without the assumed provenance)</li>
<li>Pledge a state from an invalid transaction.</li>
<li>Use a state to power two transitions of the same type</li>
<li>Use a state to power more than one transaction using reference states</li>
</ul>
</div>
<div class="section" id="forces-factors">
<h2>Forces/Factors</h2>
<p>The challenge is to set up the lock so that the lock can be released by somebody other than the owner once they have provided some consideration. This is difficult as the asset’s own contract rules are likely to state that the current owner needs to sign to transfer ownership.</p>
</div>
<div class="section" id="solution">
<h2>Solution</h2>
<p>There are four proposed patterns put forward. Each of these is described separately below.</p>
<p><strong>1.    Pre-permissioned pattern with regular states</strong></p>
<ol class="loweralpha simple">
<li><em>Description &amp; Walkthrough</em></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/Asset-Lock-option-1.png"><img alt="../../../_images/Asset-Lock-option-1.png" class="align-center" src="../../../_images/Asset-Lock-option-1.png" style="width: 80%;" /></a>
<p>The transfer of the asset occurs over two transactions:</p>
<p><strong>Tx 1</strong>: includes the AssetState itself as an input state and a LockState. The AssetState contains an owner property and any other arbitrary properties. The LockState contains the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><cite>locked</cite>: this is a copy of the input asset state in this transaction.</li>
<li><cite>proposed</cite>: a new proposed template or version of the Asset state, which will be used in transaction 2.</li>
<li><cite>considerationState</cite>: this a state that acts as either payment or proof-of-payment between A and B.</li>
<li>A reference ID</li>
</ul>
</div></blockquote>
<p>After this transaction successfully occurs the asset state becomes consumed. This transaction must be signed by the owner or seller of the asset.</p>
<p><strong>Tx 2</strong>: This transaction encompasses the actual transfer of asset ownership from Party A to Party B. The input LockState is the output state of Tx 1. The input and output ConsiderationState is a state transfer that is used to denote the payment provided for the asset.</p>
<ol class="loweralpha simple" start="2">
<li><em>Analysis &amp; Considerations</em></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Since the original asset is consumed as part of Tx 1, Party A cannot sell the asset to a different party while a deal is underway or anywhere mid-pattern.</li>
<li>Since the AssetState is referenced in the LockState of Tx 1 it is not possible to substitute a bogus state in Tx 2 i.e. one without the assumed provenance.</li>
<li>Party B cannot consume a state in an invalid Tx 2 because if Tx 1 fails then the LockState will not be created as an output state thus Tx 2 cannot happen.</li>
<li>Since the LockState is consumed it cannot be used in multiple transactions similar Tx 2. The same applies to ConsiderationState. Furthermore, reference states are not used as part of this transaction so there is no risk of one state being used in multiple transactions.</li>
<li>Since it is a bilateral agreement, privacy is shared between the two participants.</li>
<li>The crux here lies in whether the owner’s signature is required to change the state ownership property.</li>
</ul>
</div></blockquote>
<p><strong>2.    Pre-permissioned pattern with encumbered states</strong></p>
<ol class="loweralpha simple">
<li><em>Description &amp; Walkthrough</em></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/Asset-Lock-option-2.png"><img alt="../../../_images/Asset-Lock-option-2.png" class="align-center" src="../../../_images/Asset-Lock-option-2.png" style="width: 80%;" /></a>
<p>The transfer of the asset again occurs over two transactions:</p>
<p><strong>Tx 1</strong>: Here we have The AssetState (the encumbered state) to be encumbered by LockState(the encumbrance/encumbering state). The encumbrance state, if present, forces additional controls over the encumbered state. You cannot spend encumbered state without the encumbrance state. The LockState contains special properties:</p>
<blockquote>
<div><ul class="simple">
<li><cite>lockedState</cite>: this is a copy of the input asset state of this transaction.</li>
<li><cite>proposed</cite>: this is the proposed version of the Asset that the buyer will receive ownership of.</li>
<li><cite>considerationState</cite>: this a state that acts as either payment or proof-of-payment between A and B.</li>
<li><cite>currentOwner</cite>: the current owner of the asset</li>
<li><cite>newOwner</cite>: the new owner of the asset, the buyer.</li>
<li>A reference ID</li>
</ul>
</div></blockquote>
<p><strong>Tx 2</strong>: Since the encumbrance still lies on the AssetState from transaction one, the LockState must be released before the AssetState can finally be transferred to its new owner. Furthermore, the contract logic of the LockState requires the presence of a relevant ConsiderationState that defines valid payment of the AssetState, whether via the state itself of proof-of-payment elsewhere, potentially with the side state chain of the Receipts Pattern.
Again, despite encumbrances, the crux lies in whether the owner’s signature is required to change the state ownership property.</p>
<ol class="loweralpha simple" start="2">
<li><em>Analysis &amp; Considerations</em></li>
</ol>
<ul class="simple">
<li>Since the original asset is encumbered as part of Tx 1, Party A cannot sell the asset to a different party while a deal is underway or anywhere mid-pattern.</li>
<li>Since the AssetState is reference in the LockState in Tx 1 it is not possible to substitute a bogus state in Tx 2 i.e. one without the assumed provenance.</li>
<li>Party B cannot consume a state in an invalid Tx 2 because if Tx 1 fails then the LockState will not be created as an output state thus Tx 2 cannot happen.</li>
<li>Since the LockState is consumed it cannot be used in multiple transactions similar to Tx 2. The same applies to ConsiderationState.</li>
<li>Reference states are not used as part of this transaction so there is no risk of one state being used in multiple transactions.</li>
<li>Since it is a bilateral agreement, privacy is shared between the two participants. Privacy of consideration is a fundamental part of the Receipts pattern design.</li>
</ul>
<p><strong>3.    State property pre-condition lock</strong></p>
<ol class="loweralpha simple">
<li><em>Description &amp; Walkthrough</em></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/Asset-Lock-option-3.png"><img alt="../../../_images/Asset-Lock-option-3.png" class="align-center" src="../../../_images/Asset-Lock-option-3.png" style="width: 80%;" /></a>
<p>This asset transfer also occurs over two transactions.</p>
<p><strong>Tx 1</strong>: involves the preparation of the asset state for transfer via the addition of fields and conditions. This happens by consuming the input AssetState to a new ‘twin’ output AssetState. This output AssetState contains the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><cite>currentOwner</cite>: the current owner of the asset</li>
<li><cite>newOwner</cite>: the new owner of the asset, the buyer.</li>
<li><cite>precondition</cite>: this is some event that must occur before the state can be consumed. The condition could be the presence of the correct ConsiderationState in a transaction with it.</li>
<li><cite>considerationState</cite>: this a state that acts as either payment or proof-of-payment between A and B.</li>
<li>A reference ID to be used in the consideration later on.</li>
</ul>
</div></blockquote>
<p><strong>Tx 2</strong>: In order for the transfer of the AssetState to occur, the contract rules of the twin AssetState must be met. These include that the precondition is satisfied and that there is a ConsiderationState with the correct reference ID also present in the transaction.</p>
<ol class="loweralpha simple" start="2">
<li><em>Analysis &amp; Considerations</em></li>
</ol>
<ul class="simple">
<li>Since the original asset is consumed as part of Tx 1, Party A cannot sell the asset to a different party while a deal is underway or anywhere mid-pattern.</li>
<li>Since the AssetState new owner (PartyB) is referenced in the twin AssetStatein Tx 1 it is not possible to sneakily change the new owner to some other Party in Tx 2.</li>
<li>Party B cannot consume a state in an invalid Tx 2 because if Tx 1 fails then the twin AssetState will not be created as an output state, thus Tx 2 cannot happen.</li>
<li>Since the twin AssetState is consumed it cannot be deviously be reused in multiple transactions similar to Tx 2. The same applies to ConsiderationState.</li>
<li>Reference states are not used as part of this transaction so there is no risk of one state being used in multiple transactions.</li>
<li>It is mandatory that the owners signatue is not required to transfer ownership of the asset in Tx 2, other the payment could be made and the Asset never transferred.</li>
<li>Since it is a bilateral agreement, privacy is shared between the two participants. Privacy of the consideration is a fundamental part of the Receipts pattern design.</li>
<li>There is a concern that the receiving party could alter the FinalityFlow such that the Consideration/Payment would be notarised but then the actual state not passed over to the selling party. This might not even involve altering the FinalityFlow and could just be blocking the packets from reaching the counterparty.</li>
<li>This means the buyer could end up with both the consideration <strong>and</strong> the asset.</li>
<li>This concern may be counteracted by allowing the selling party to initiate the transaction such that they are responsible for sending the states across. This may however bring about the same trust issue, but in reverse.</li>
<li>There might be potential for a custom <em>ReverseFinalityFlow</em> that is called on the responder side such that they can notarise the signed transaction and broadcast the states.</li>
</ul>
<p>This pattern doesn’t actually lock the asset, so not an asset lock, it only gives the ability for someone other than the owner to move the asset.</p>
<p><strong>4. Pre-permissioned Asset transfer with reference states</strong></p>
<ol class="loweralpha simple">
<li><em>Description &amp; Walkthrough</em></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/Asset-Lock-option-4.png"><img alt="../../../_images/Asset-Lock-option-4.png" class="align-center" src="../../../_images/Asset-Lock-option-4.png" style="width: 80%;" /></a>
<p>This asset transfer also occurs over two transactions.</p>
<p><strong>Tx 1</strong>: the AssetState to be transferred is first included as a reference state. A LockState as before is also included as an output, containing the properties:</p>
<blockquote>
<div><ul class="simple">
<li><cite>lockedState</cite>: this is a copy of the input reference state of this transaction.</li>
<li><cite>proposed</cite>: this is the proposed version of the Asset that the buyer will receive ownership of.</li>
<li><cite>considerationState</cite>: this a state that acts as either payment or proof-of-payment between A and B.</li>
<li><cite>currentOwner</cite>: the current owner of the asset</li>
<li><cite>newOwner</cite>: the new owner of the asset, the buyer.</li>
<li>A reference ID to be used in the consideration later on</li>
</ul>
</div></blockquote>
<p><strong>Tx 2</strong>: As before, the contract rules of the LockState require that for the AssetState to be spent the specified lock must be present. The same goes for the consideration.</p>
<ol class="loweralpha simple" start="2">
<li><em>Analysis &amp; Considerations</em></li>
</ol>
<ul class="simple">
<li>It seems possible for the AssetState to be spent away by the selling party since is it not consumed as part of Tx 1.</li>
<li>Since the AssetState new owner (PartyB) is referenced in the LockedState in Tx 1 it is not possible to sneakily change the new owner to some other Party in Tx 2.</li>
<li>Party B cannot consume a state in an invalid Tx 2 because if Tx 1 fails then the LockState will not be created as an output state, thus Tx 2 cannot happen.</li>
<li>By virtue of being a reference state the AssetState is <strong>not</strong> consumed, thus there is the possibility that it could be deviously be reused in multiple transactions similar to Tx 2.</li>
<li>Since it is a bilateral agreement, privacy is shared between the two participants. Privacy of the consideration is a fundamental part of the Receipts pattern design.</li>
<li>This pattern doesn’t actually lock the asset, so it is not in fact an asset lock. It only gives the ability for someone other than the owner to move the asset. ** Explain further</li>
</ul>
<p>Note, if need to guarantee that only a specific counterparty can pay the consideration, then the counterparty can pass H(Secret) to the asset owner. when the asset owner creates the asset lock, a pre-condition is that the consideration state must reveal the matching secret.</p>
</div>
<div class="section" id="benefits">
<h2>Benefits</h2>
<p>This pattern can allow two mutually distrusting partys to perform an atomic swap of two assets without the need our a third party to validate the transaction.</p>
</div>
<div class="section" id="drawbacks">
<h2>Drawbacks</h2>
<p>The challenge is to set up the lock so that the lock can be released by somebody other than the owner once they have provided some consideration.
This is difficult as the asset’s own contract rules are likely to state that the current owner needs to sign to transfer ownership.
It is thus likely that the asset has to have a rule that says it can be transferred without the owners signature if some form of precondition is proved to have been met. eg a lock state signed by the owner specifying asset that can be transferred, who it is transferred to and the condition for the transfer.</p>
</div>
<div class="section" id="related-patterns-extensions">
<h2>Related Patterns &amp; Extensions</h2>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, R3 Limited.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>